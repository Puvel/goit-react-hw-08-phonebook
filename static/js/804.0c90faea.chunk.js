"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[804],{7804:function(t,e,n){n.r(e),n.d(e,{ContactsPage:function(){return q}});var a=n(9439),c=n(2791),s=n(6907),o=n(9434),r=n(5861),l=n(7757),u=n.n(l),i=n(1912),d=n(3402),m=n(7793),p="contactsPage_contacts__FPC51",_="contactsPage_contactsTitle__FDz89",f="contactsPage_contactsAddBtn__qQP+3",b="contactsPage_contactsAddImage__F+PQo",v="contactsPage_contactsList__EFU7l";var h=n.p+"static/media/plus.ebf54c065e84f1dff2783c643e0fafd0.svg";var x=n.p+"static/media/cross.82a21c09859aabcb5964fd8655710a57.svg",N="modal_overlay__j1SnE",j="modal_modal__4TXNT",g="modal_modalCloseWrap__g53BE",I="modal_modalText__k25kP",C="modal_modalCloseBtn__B5gfP",k="modal_modalCloseIcon__k0Mve",w="modal_modalForm__sbQpq",y="modal_modalLabel__i3TPM",Z="modal_modalInputWrap__mivR1",B="modal_modalInput__zDbpY",S="modal_focuded__t4SDS",P="modal_modalBtn__NlXTC",F=n(3329),E=function(t){var e=t.closeModal,n=(0,o.I0)(),s=(0,c.useState)(""),l=(0,a.Z)(s,2),p=l[0],_=l[1],f=(0,c.useState)(""),b=(0,a.Z)(f,2),v=b[0],h=b[1],E=(0,c.useRef)(null),T=(0,c.useCallback)((function(t){"Escape"===t.code&&e()}),[e]);(0,c.useEffect)((function(){return window.addEventListener("keydown",T),function(){return window.removeEventListener("keydown",T)}}),[T]);var L=function(t){var e=t.target,n=e.name,a=e.value;switch(n){case"name":return _(a);case"number":return h(a);default:return}};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:N,ref:E,onClick:function(t){var n=E.current;n&&t.target!==n||e()},onKeyDown:T}),(0,F.jsxs)("div",{className:j,children:[(0,F.jsxs)("div",{className:g,children:[(0,F.jsx)("p",{className:I,children:"New contact"}),(0,F.jsx)("button",{className:C,onClick:e,type:"button",children:(0,F.jsx)("img",{className:k,src:x,alt:"Cross Icon"})})]}),(0,F.jsxs)("form",{className:w,onSubmit:function(t){var a;t.preventDefault(),n((a={name:p,number:v},function(){var t=(0,r.Z)(u().mark((function t(e){var n,c,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e((0,m.md)()),t.prev=1,t.next=4,i.Z.post("/contacts",a);case 4:n=t.sent,c=n.data,e((0,m.ff)(c)),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),s="",400===t.t0.response.status?s="Name and phone is required!":401===t.t0.response.status?s="Unauthorized":404===t.t0.response.status?s="Not found!":500===t.t0.response.status&&(s="Server error!"),(0,d.ZP)(s),e((0,m.xZ)(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())),_(""),h(""),e()},autoComplete:"off",children:[(0,F.jsxs)("div",{className:Z,children:[(0,F.jsx)("input",{className:B,id:"name",type:"text",name:"name",value:p,onChange:L}),(0,F.jsx)("label",{className:"".concat(y," ").concat(p.length&&S),children:"Name"})]}),(0,F.jsxs)("div",{className:Z,children:[(0,F.jsx)("input",{className:B,id:"number",type:"text",name:"number",value:v,onChange:L}),(0,F.jsx)("label",{className:"".concat(y," ").concat(v.length&&S),children:"Password"})]}),(0,F.jsx)("button",{className:P,disabled:!p||!v,type:"submit",children:"Add"})]})]})]})};var T=n.p+"static/media/bin.efdbd4b8f7e45bca8a85253b74cc41b0.svg";var L=n.p+"static/media/pencil.649500ea5495fa6e6c61a78bb3a5253e.svg";var W=n.p+"static/media/floppy-disk.39d169d8304f1e04edb748c87c27736b.svg";var z=n.p+"static/media/cancel.818bc05c6eba91e074114d001af7e70c.svg",D={contact:"contactItem_contact__nbzMM",contactForm:"contactItem_contactForm__LL1S-",contactInputsWrap:"contactItem_contactInputsWrap__C0iu3",contactControl:"contactItem_contactControl__ZRRKg",contactLabel:"contactItem_contactLabel__QMlmB",contactInput:"contactItem_contactInput__PFdvs",contactText:"contactItem_contactText__lzGsF",contactsBtnWrap:"contactItem_contactsBtnWrap__ahRAp",btn:"contactItem_btn__wwFoY",contactsBtnIcon:"contactItem_contactsBtnIcon__KReTm"},M=function(t){var e=t.contactId,n=t.contactName,s=t.contactNumber,l=t.hasEdit,p=t.setEdit,_=(0,o.I0)(),f=(0,c.useState)(n),b=(0,a.Z)(f,2),v=b[0],h=b[1],x=(0,c.useState)(s),N=(0,a.Z)(x,2),j=N[0],g=N[1],I=(0,c.useState)(!1),C=(0,a.Z)(I,2),k=C[0],w=C[1],y=function(t){var e=t.target,n=e.name,a=e.value;switch(n){case"name":return h(a);case"number":return g(a);default:return}};return(0,F.jsx)("li",{className:D.contact,children:(0,F.jsxs)("form",{className:D.contactForm,onSubmit:function(t){t.preventDefault(),v&&j&&(_(function(t,e){return function(){var n=(0,r.Z)(u().mark((function n(a){var c,s,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a((0,m.LF)()),n.prev=1,n.next=4,i.Z.patch("/contacts/".concat(t),e);case 4:c=n.sent,s=c.data,a((0,m.FS)(s)),n.next=15;break;case 9:n.prev=9,n.t0=n.catch(1),o="",401===n.t0.response.status?o="Unauthorized":404===n.t0.response.status?o="Not found!":500===n.t0.response.status&&(o="Server error!"),(0,d.ZP)(o),(0,m.cZ)(n.t0.message);case 15:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(t){return n.apply(this,arguments)}}()}(e,{name:v,number:j})),w(!1),p(!1))},children:[(0,F.jsxs)("div",{className:D.contactInputsWrap,children:[(0,F.jsxs)("div",{className:D.contactControl,children:[(0,F.jsx)("label",{className:D.contactLabel,htmlFor:"name",children:"Name"}),k?(0,F.jsx)("input",{className:D.contactInput,type:"text",id:"name",name:"name",disabled:!k,onChange:y,value:v}):(0,F.jsx)("p",{className:D.contactText,children:v})]}),(0,F.jsxs)("div",{className:D.contactControl,children:[(0,F.jsx)("label",{className:D.contactLabel,htmlFor:"number",children:"Number"}),k?(0,F.jsx)("input",{className:D.contactInput,id:"number",type:"text",name:"number",disabled:!k,onChange:y,value:j}):(0,F.jsx)("p",{className:D.contactText,children:j})]})]}),k?(0,F.jsxs)("div",{className:D.contactsBtnWrap,children:[(0,F.jsx)("button",{disabled:!k,className:"".concat(D.contactsSaveBtn," ").concat(D.btn),type:"submit",children:(0,F.jsx)("img",{className:D.contactsBtnIcon,src:W,alt:"Floppy disk Icon"})}),(0,F.jsx)("button",{onClick:function(){h(n),g(s),w(!1),p(!1)},disabled:!k,className:"".concat(D.contactsCancelBtn," ").concat(D.btn),type:"button",children:(0,F.jsx)("img",{className:D.contactsBtnIcon,src:z,alt:"Cancel Icon"})})]}):!l&&(0,F.jsxs)("div",{className:D.contactsBtnWrap,children:[(0,F.jsx)("button",{disabled:k,onClick:function(){return setTimeout((function(){w(!0),p(!0)}),0)},className:"".concat(D.contactsEditBtn," ").concat(D.btn),type:"button",children:(0,F.jsx)("img",{className:D.contactsBtnIcon,src:L,alt:"Pencil Icon"})}),(0,F.jsx)("button",{disabled:k,onClick:function(){return _(function(t){return function(){var e=(0,r.Z)(u().mark((function e(n){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n((0,m.us)()),e.prev=1,e.next=4,i.Z.delete("/contacts/".concat(t));case 4:n((0,m.uv)(t)),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(1),a="",401===e.t0.response.status?a="Unauthorized":404===e.t0.response.status?a="Not found!":500===e.t0.response.status&&(a="Server error!"),(0,d.ZP)(a),(0,m.EF)(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}(e))},className:"".concat(D.contactsDeleteBtn," ").concat(D.btn),type:"button",children:(0,F.jsx)("img",{className:D.contactsBtnIcon,src:T,alt:"Bin Icon"})})]})]})},e)},q=function(){var t=(0,c.useState)(""),e=(0,a.Z)(t,2),n=e[0],l=e[1],x=(0,c.useState)(!1),N=(0,a.Z)(x,2),j=N[0],g=N[1],I=(0,o.v9)((function(t){return t.contacts})),C=(0,o.I0)(),k=function(t){return g(t)};return(0,c.useEffect)((function(){C(function(){var t=(0,r.Z)(u().mark((function t(e){var n,a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e((0,m.$0)()),t.prev=1,t.next=4,i.Z.get("/contacts");case 4:n=t.sent,a=n.data,e((0,m.v2)(a)),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),c="",401===t.t0.response.status?c="Unauthorized":404===t.t0.response.status?c="Not found!":500===t.t0.response.status&&(c="Server error!"),(0,d.ZP)(c),e((0,m.I7)(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}),[C]),(0,F.jsxs)("div",{className:p,children:[(0,F.jsx)(s.ql,{children:(0,F.jsx)("title",{children:"Contacts page"})}),(0,F.jsx)("h1",{className:_,children:"Contacts"}),(0,F.jsx)("button",{onClick:function(){document.querySelector("body").style.overflow="hidden",l(!0)},className:f,type:"button",children:(0,F.jsx)("img",{className:b,src:h,alt:"Plus Icon"})}),I.length>0&&(0,F.jsx)("ul",{className:v,children:I.map((function(t){return(0,F.jsx)(M,{setEdit:k,hasEdit:j,contactId:t.id,contactName:t.name,contactNumber:t.number},t.id)}))}),n&&(0,F.jsx)(E,{closeModal:function(){l(!1),document.querySelector("body").style.overflow="auto"}})]})}}}]);
//# sourceMappingURL=804.0c90faea.chunk.js.map